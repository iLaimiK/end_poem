{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js","webpack://tavern_helper_template/src/map_graph/components/MapControls.vue?9c04","webpack://tavern_helper_template/src/map_graph/components/MapControls.vue?0bd3","webpack://tavern_helper_template/src/map_graph/components/MapContainer.vue?3827","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/listToStyles.js","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js","src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://tavern_helper_template/src/map_graph/components/MapContainer.vue?c957","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/webpack/runtime/make namespace object","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/src/map_graph/core/canvas-renderer.ts","src://tavern_helper_template/src/map_graph/core/map-interaction.ts","src://tavern_helper_template/src/map_graph/core/map-parser.ts","src://tavern_helper_template/src/map_graph/components/MapControls.vue","webpack://tavern_helper_template/src/map_graph/components/MapControls.vue?0ebe","src://tavern_helper_template/src/map_graph/components/MapContainer.vue","webpack://tavern_helper_template/src/map_graph/components/MapContainer.vue?ee2c","src://tavern_helper_template/src/map_graph/index.ts"],"sourcesContent":["\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.map_controls[data-v-2de7aaed]{position:absolute;top:10px;right:10px;display:flex;flex-direction:column;gap:8px;z-index:10}.map_controls .control_button[data-v-2de7aaed]{width:36px;height:36px;background:rgba(22,33,62,.9);border:1px solid #4a9eff;border-radius:6px;color:#4a9eff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;transition:all .2s ease;-webkit-user-select:none;user-select:none}.map_controls .control_button[data-v-2de7aaed]:hover{background:rgba(74,158,255,.2);color:#e8eaf0;transform:scale(1.05)}.map_controls .control_button[data-v-2de7aaed]:active{transform:scale(0.95);background:rgba(74,158,255,.4)}.map_controls .control_button i[data-v-2de7aaed]{pointer-events:none}@media (max-width:768px){.map_controls[data-v-2de7aaed]{top:8px;right:8px;gap:6px}.map_controls .control_button[data-v-2de7aaed]{width:32px;height:32px;font-size:12px}.map_controls .control_button[data-v-2de7aaed]:active{transform:scale(0.9);background:rgba(74,158,255,.5)}}@media (max-width:480px){.map_controls[data-v-2de7aaed]{top:6px;right:6px;gap:4px}.map_controls .control_button[data-v-2de7aaed]{width:30px;height:30px;font-size:11px;border-radius:4px}.map_controls .control_button[data-v-2de7aaed]:active{transform:scale(0.85)}}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/map_graph/components/MapControls.vue\"],\"names\":[],\"mappings\":\"AACA,+BACE,iBAAA,CACA,QAAA,CACA,UAAA,CACA,YAAA,CACA,qBAAA,CACA,OAAA,CACA,UAAA,CAEA,+CACE,UAAA,CACA,WAAA,CACA,4BAAA,CACA,wBAAA,CACA,iBAAA,CACA,aAAA,CACA,cAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,cAAA,CACA,uBAAA,CACA,wBAAA,CAAA,gBAAA,CAEA,qDACE,8BAAA,CACA,aAAA,CACA,qBAAA,CAGF,sDACE,qBAAA,CACA,8BAAA,CAGF,iDACE,mBAAA,CAMN,yBACE,+BACE,OAAA,CACA,SAAA,CACA,OAAA,CAEA,+CACE,UAAA,CACA,WAAA,CACA,cAAA,CAEA,sDACE,oBAAA,CACA,8BAAA,CAAA,CAMR,yBACE,+BACE,OAAA,CACA,SAAA,CACA,OAAA,CAEA,+CACE,UAAA,CACA,WAAA,CACA,cAAA,CACA,iBAAA,CAEA,sDACE,qBAAA,CAAA\",\"sourcesContent\":[\"\\n.map_controls {\\n  position: absolute;\\n  top: 10px;\\n  right: 10px;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 8px;\\n  z-index: 10;\\n\\n  .control_button {\\n    width: 36px;\\n    height: 36px;\\n    background: rgba(22, 33, 62, 0.9);\\n    border: 1px solid #4a9eff;\\n    border-radius: 6px;\\n    color: #4a9eff;\\n    cursor: pointer;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n    font-size: 14px;\\n    transition: all 0.2s ease;\\n    user-select: none;\\n\\n    &:hover {\\n      background: rgba(74, 158, 255, 0.2);\\n      color: #e8eaf0;\\n      transform: scale(1.05);\\n    }\\n\\n    &:active {\\n      transform: scale(0.95);\\n      background: rgba(74, 158, 255, 0.4);\\n    }\\n\\n    i {\\n      pointer-events: none;\\n    }\\n  }\\n}\\n\\n/* 移动端优化 */\\n@media (max-width: 768px) {\\n  .map_controls {\\n    top: 8px;\\n    right: 8px;\\n    gap: 6px;\\n\\n    .control_button {\\n      width: 32px;\\n      height: 32px;\\n      font-size: 12px;\\n\\n      &:active {\\n        transform: scale(0.9);\\n        background: rgba(74, 158, 255, 0.5);\\n      }\\n    }\\n  }\\n}\\n\\n@media (max-width: 480px) {\\n  .map_controls {\\n    top: 6px;\\n    right: 6px;\\n    gap: 4px;\\n\\n    .control_button {\\n      width: 30px;\\n      height: 30px;\\n      font-size: 11px;\\n      border-radius: 4px;\\n\\n      &:active {\\n        transform: scale(0.85);\\n      }\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-109.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.93.2_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MapControls.vue?vue&type=style&index=0&id=2de7aaed&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"33fc2d9e\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-109.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.93.2_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MapControls.vue?vue&type=style&index=0&id=2de7aaed&lang=scss&scoped=true\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-109.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.93.2_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MapControls.vue?vue&type=style&index=0&id=2de7aaed&lang=scss&scoped=true\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-109.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.93.2_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MapContainer.vue?vue&type=style&index=0&id=ca1729aa&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"2f85e7aa\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-109.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.93.2_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MapContainer.vue?vue&type=style&index=0&id=ca1729aa&lang=scss&scoped=true\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-109.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/sass-loader@16.0.6_sass@1.93.2_webpack@5.102.1/node_modules/sass-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MapContainer.vue?vue&type=style&index=0&id=ca1729aa&lang=scss&scoped=true\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.map_graph[data-v-ca1729aa]{font-family:\"Segoe UI\",\"Tahoma\",\"Geneva\",\"Verdana\",sans-serif;color:rgba(232,234,240,.8);margin:15px 0;position:relative;z-index:1}.map_graph .map_container[data-v-ca1729aa]{background-color:#16213e;padding:6px;border-radius:6px;display:flex;flex-direction:column;gap:6px;border:1px solid #e8eaf0;position:relative;overflow:hidden}.map_graph .map_title_bar[data-v-ca1729aa]{text-align:center}.map_graph .map_title_bar .map_title[data-v-ca1729aa]{color:#e8eaf0;font-size:1.1rem;margin:0;text-transform:uppercase;letter-spacing:1px}.map_graph .map_title_bar i[data-v-ca1729aa]{color:#4a9eff;margin-right:8px}.map_graph .monitor-screen[data-v-ca1729aa]{background-color:rgba(22,33,62,.5);border:1px solid #8baac7;padding:5px;box-shadow:0 0 20px rgba(74,158,255,.2) inset;position:relative;overflow:hidden;width:100%;min-height:600px;cursor:grab;border-radius:4px;touch-action:pan-x pan-y}.map_graph .monitor-screen.grabbing[data-v-ca1729aa]{cursor:grabbing !important}.map_graph .monitor-screen canvas[data-v-ca1729aa]{position:absolute;top:0;left:0;width:100%;height:100%;display:block;background-color:rgba(0,0,0,0)}.map_graph .monitor-screen .zoom_indicator[data-v-ca1729aa]{position:absolute;top:10px;left:10px;background:rgba(22,33,62,.9);border:1px solid #4a9eff;border-radius:6px;padding:8px 12px;color:#e8eaf0;font-size:14px;font-weight:bold;z-index:10;opacity:.9;transition:opacity .3s ease;-webkit-user-select:none;user-select:none;pointer-events:none}@media (max-width:768px){.map_graph[data-v-ca1729aa]{margin:10px 0}.map_graph .map_container[data-v-ca1729aa]{padding:8px 4px 4px 4px}.map_graph .monitor-screen[data-v-ca1729aa]{min-height:400px;padding:3px;touch-action:manipulation}.map_graph .monitor-screen .zoom_indicator[data-v-ca1729aa]{top:8px;left:8px;padding:6px 10px;font-size:12px}.map_graph .map_title_bar .map_title[data-v-ca1729aa]{font-size:1.1rem}.map_graph .map_title_bar .map_movement[data-v-ca1729aa]{font-size:.9rem}}@media (max-width:480px){.map_graph .monitor-screen[data-v-ca1729aa]{min-height:300px}.map_graph .monitor-screen .zoom_indicator[data-v-ca1729aa]{top:6px;left:6px;padding:4px 8px;font-size:11px;border-radius:4px}.map_graph .map_title_bar .map_title[data-v-ca1729aa]{font-size:1rem}}`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/map_graph/components/MapContainer.vue\"],\"names\":[],\"mappings\":\"AACA,4BACE,6DAAA,CACA,0BAAA,CACA,aAAA,CACA,iBAAA,CACA,SAAA,CAEA,2CACE,wBAAA,CACA,WAAA,CACA,iBAAA,CACA,YAAA,CACA,qBAAA,CACA,OAAA,CACA,wBAAA,CACA,iBAAA,CACA,eAAA,CAGF,2CACE,iBAAA,CAEA,sDACE,aAAA,CACA,gBAAA,CACA,QAAA,CACA,wBAAA,CACA,kBAAA,CAGF,6CACE,aAAA,CACA,gBAAA,CAIJ,4CACE,kCAAA,CACA,wBAAA,CACA,WAAA,CACA,6CAAA,CACA,iBAAA,CACA,eAAA,CACA,UAAA,CACA,gBAAA,CACA,WAAA,CACA,iBAAA,CAEA,wBAAA,CAEA,qDACE,0BAAA,CAGF,mDACE,iBAAA,CACA,KAAA,CACA,MAAA,CACA,UAAA,CACA,WAAA,CACA,aAAA,CACA,8BAAA,CAGF,4DACE,iBAAA,CACA,QAAA,CACA,SAAA,CACA,4BAAA,CACA,wBAAA,CACA,iBAAA,CACA,gBAAA,CACA,aAAA,CACA,cAAA,CACA,gBAAA,CACA,UAAA,CACA,UAAA,CACA,2BAAA,CACA,wBAAA,CAAA,gBAAA,CACA,mBAAA,CAMN,yBACE,4BACE,aAAA,CAEA,2CACE,uBAAA,CAGF,4CACE,gBAAA,CACA,WAAA,CAEA,yBAAA,CAEA,4DACE,OAAA,CACA,QAAA,CACA,gBAAA,CACA,cAAA,CAKF,sDACE,gBAAA,CAGF,yDACE,eAAA,CAAA,CAOR,yBAEI,4CACE,gBAAA,CAEA,4DACE,OAAA,CACA,QAAA,CACA,eAAA,CACA,cAAA,CACA,iBAAA,CAKF,sDACE,cAAA,CAAA\",\"sourcesContent\":[\"\\n.map_graph {\\n  font-family: 'Segoe UI', 'Tahoma', 'Geneva', 'Verdana', sans-serif;\\n  color: rgba(232, 234, 240, 0.8);\\n  margin: 15px 0;\\n  position: relative;\\n  z-index: 1;\\n\\n  .map_container {\\n    background-color: #16213e;\\n    padding: 6px;\\n    border-radius: 6px;\\n    display: flex;\\n    flex-direction: column;\\n    gap: 6px;\\n    border: 1px solid #e8eaf0;\\n    position: relative;\\n    overflow: hidden;\\n  }\\n\\n  .map_title_bar {\\n    text-align: center;\\n\\n    .map_title {\\n      color: #e8eaf0;\\n      font-size: 1.1rem;\\n      margin: 0;\\n      text-transform: uppercase;\\n      letter-spacing: 1px;\\n    }\\n\\n    i {\\n      color: #4a9eff;\\n      margin-right: 8px;\\n    }\\n  }\\n\\n  .monitor-screen {\\n    background-color: rgba(22, 33, 62, 0.5);\\n    border: 1px solid #8baac7;\\n    padding: 5px;\\n    box-shadow: 0 0 20px rgba(74, 158, 255, 0.2) inset;\\n    position: relative;\\n    overflow: hidden;\\n    width: 100%;\\n    min-height: 600px;\\n    cursor: grab;\\n    border-radius: 4px;\\n    // 确保在移动端的稳定性\\n    touch-action: pan-x pan-y;\\n\\n    &.grabbing {\\n      cursor: grabbing !important;\\n    }\\n\\n    canvas {\\n      position: absolute;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      display: block;\\n      background-color: transparent;\\n    }\\n\\n    .zoom_indicator {\\n      position: absolute;\\n      top: 10px;\\n      left: 10px;\\n      background: rgba(22, 33, 62, 0.9);\\n      border: 1px solid #4a9eff;\\n      border-radius: 6px;\\n      padding: 8px 12px;\\n      color: #e8eaf0;\\n      font-size: 14px;\\n      font-weight: bold;\\n      z-index: 10;\\n      opacity: 0.9;\\n      transition: opacity 0.3s ease;\\n      user-select: none;\\n      pointer-events: none;\\n    }\\n  }\\n}\\n\\n/* 响应式设计 */\\n@media (max-width: 768px) {\\n  .map_graph {\\n    margin: 10px 0;\\n\\n    .map_container {\\n      padding: 8px 4px 4px 4px;\\n    }\\n\\n    .monitor-screen {\\n      min-height: 400px;\\n      padding: 3px;\\n      // 优化触摸体验\\n      touch-action: manipulation;\\n\\n      .zoom_indicator {\\n        top: 8px;\\n        left: 8px;\\n        padding: 6px 10px;\\n        font-size: 12px;\\n      }\\n    }\\n\\n    .map_title_bar {\\n      .map_title {\\n        font-size: 1.1rem;\\n      }\\n\\n      .map_movement {\\n        font-size: 0.9rem;\\n      }\\n    }\\n  }\\n}\\n\\n// 针对更小屏幕的优化\\n@media (max-width: 480px) {\\n  .map_graph {\\n    .monitor-screen {\\n      min-height: 300px;\\n\\n      .zoom_indicator {\\n        top: 6px;\\n        left: 6px;\\n        padding: 4px 8px;\\n        font-size: 11px;\\n        border-radius: 4px;\\n      }\\n    }\\n\\n    .map_title_bar {\\n      .map_title {\\n        font-size: 1rem;\\n      }\\n    }\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","import { MapData, MapEdge, MapNode, ViewState } from '../types';\n\n/**\n * 画布渲染器 - 简化版本\n */\nexport class CanvasRenderer {\n  private readonly canvas: HTMLCanvasElement;\n  private readonly ctx: CanvasRenderingContext2D;\n  private readonly viewState: ViewState;\n  private mapData: MapData | null = null;\n\n  // 移动端检测\n  private get isMobile(): boolean {\n    return window.innerWidth <= 768;\n  }\n  private get isSmallMobile(): boolean {\n    return window.innerWidth <= 480;\n  }\n\n  constructor(canvas: HTMLCanvasElement) {\n    this.canvas = canvas;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) {\n      throw new Error('无法获取Canvas上下文');\n    }\n    this.ctx = ctx;\n\n    this.viewState = {\n      offsetX: 0,\n      offsetY: 0,\n      scale: 1,\n    };\n\n    this.setupCanvas();\n  }\n\n  /**\n   * 设置画布 - 不强制设置固定尺寸\n   */\n  private setupCanvas(): void {\n    // 让canvas通过CSS样式自然适应容器大小\n    this.updateCanvasSize();\n\n    // 优化画布渲染质量\n    this.optimizeCanvasQuality();\n  }\n\n  /**\n   * 优化画布渲染质量\n   */\n  private optimizeCanvasQuality(): void {\n    // 启用抗锯齿和平滑效果\n    this.ctx.imageSmoothingEnabled = true;\n    this.ctx.imageSmoothingQuality = 'high';\n\n    // 设置线条连接和端点样式为圆润\n    this.ctx.lineCap = 'round';\n    this.ctx.lineJoin = 'round';\n  }\n\n  /**\n   * 更新画布尺寸\n   */\n  private updateCanvasSize(): void {\n    const dpr = window.devicePixelRatio || 1;\n    const rect = this.canvas.getBoundingClientRect();\n\n    // 只有当尺寸真正改变时才更新\n    const newWidth = rect.width * dpr;\n    const newHeight = rect.height * dpr;\n\n    if (this.canvas.width !== newWidth || this.canvas.height !== newHeight) {\n      this.canvas.width = newWidth;\n      this.canvas.height = newHeight;\n\n      this.canvas.style.width = rect.width + 'px';\n      this.canvas.style.height = rect.height + 'px';\n\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n\n      // 重新应用画布质量优化\n      this.optimizeCanvasQuality();\n    }\n  }\n\n  /**\n   * 设置地图数据\n   */\n  public setMapData(mapData: MapData): void {\n    this.mapData = mapData;\n    // 延迟重置视图，确保容器尺寸稳定\n    setTimeout(() => {\n      this.resetView();\n      this.render();\n    }, 50);\n  }\n\n  /**\n   * 重置视图\n   */\n  private resetView(): void {\n    if (!this.mapData || this.mapData.nodes.length === 0) return;\n\n    // 确保Canvas尺寸是最新的\n    this.updateCanvasSize();\n\n    // 计算地图边界\n    const xs = this.mapData.nodes.map(n => n.x);\n    const ys = this.mapData.nodes.map(n => n.y);\n\n    const minX = Math.min(...xs);\n    const maxX = Math.max(...xs);\n    const minY = Math.min(...ys);\n    const maxY = Math.max(...ys);\n\n    // 计算地图内容的实际尺寸\n    const mapWidth = maxX - minX;\n    const mapHeight = maxY - minY;\n\n    // 获取当前容器的实际尺寸\n    const rect = this.canvas.getBoundingClientRect();\n    const containerWidth = rect.width;\n    const containerHeight = rect.height;\n\n    // 如果地图内容尺寸为0，使用默认缩放\n    if (mapWidth === 0 && mapHeight === 0) {\n      this.viewState.offsetX = -((minX + maxX) / 2);\n      this.viewState.offsetY = -((minY + maxY) / 2);\n      this.viewState.scale = 1;\n      return;\n    }\n\n    // 计算合适的缩放比例，预留20%边距\n    let scale = 1;\n    if (containerWidth > 0 && containerHeight > 0) {\n      const scaleX = mapWidth > 0 ? (containerWidth * 0.8) / mapWidth : 1;\n      const scaleY = mapHeight > 0 ? (containerHeight * 0.8) / mapHeight : 1;\n      scale = Math.min(scaleX, scaleY);\n      // 设置合理的缩放范围\n      scale = Math.min(Math.max(scale, 0.2), 2);\n    }\n\n    // 居中显示\n    this.viewState.offsetX = -((minX + maxX) / 2);\n    this.viewState.offsetY = -((minY + maxY) / 2);\n    this.viewState.scale = scale;\n  }\n\n  /**\n   * 渲染地图\n   */\n  public render(): void {\n    if (!this.mapData) return;\n\n    // 确保画布尺寸是最新的\n    this.updateCanvasSize();\n\n    this.clearCanvas();\n    this.applyTransform();\n\n    // 绘制边\n    this.drawEdges();\n\n    // 绘制节点\n    this.drawNodes();\n\n    // 绘制标签\n    this.drawLabels();\n  }\n\n  private clearCanvas(): void {\n    // 保存当前变换状态\n    this.ctx.save();\n    // 重置到默认变换来清除整个画布\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    // 恢复变换状态\n    this.ctx.restore();\n\n    // 确保清除后重新应用质量设置\n    this.optimizeCanvasQuality();\n  }\n\n  private applyTransform(): void {\n    const { offsetX, offsetY, scale } = this.viewState;\n    const dpr = window.devicePixelRatio || 1;\n\n    // Canvas内部尺寸（考虑DPR）\n    const canvasWidth = this.canvas.width;\n    const canvasHeight = this.canvas.height;\n\n    // 正确处理DPR的变换：使用Canvas内部尺寸计算中心点\n    const centerX = canvasWidth / 2;\n    const centerY = canvasHeight / 2;\n\n    // 应用变换：DPR缩放 * 地图缩放\n    const finalScale = scale * dpr;\n\n    this.ctx.setTransform(finalScale, 0, 0, finalScale, centerX + finalScale * offsetX, centerY + finalScale * offsetY);\n\n    // 重新应用画布质量优化（变换后需要重新设置）\n    this.optimizeCanvasQuality();\n  }\n\n  private drawEdges(): void {\n    if (!this.mapData) return;\n\n    this.mapData.edges.forEach(edge => {\n      const fromNode = this.mapData!.nodes.find(n => n.id === edge.from);\n      const toNode = this.mapData!.nodes.find(n => n.id === edge.to);\n\n      if (fromNode && toNode) {\n        // 计算边缘交点，避免线条穿透节点形状\n        const fromEdge = this.getNodeEdgePoint(fromNode, toNode);\n        const toEdge = this.getNodeEdgePoint(toNode, fromNode);\n\n        this.drawEdge(edge, fromEdge, toEdge);\n      }\n    });\n  }\n\n  /**\n   * 绘制单条边，根据类型设置不同样式\n   */\n  private drawEdge(edge: MapEdge, from: { x: number; y: number }, to: { x: number; y: number }): void {\n    // 优化线条粗细\n    const baseLineWidth = this.isSmallMobile ? 0.5 : this.isMobile ? 0.6 : 1.0;\n\n    // 确保在高DPI设备上线条保持合适粗细\n    this.ctx.lineWidth = Math.max(0.3, baseLineWidth / this.viewState.scale);\n\n    // 检查边是否连接到不可达节点（仅对普通连接有效）\n    const isConnectedToUnreachable = edge.type === 'c' && this.isEdgeConnectedToUnreachableNode(edge);\n\n    // 设置更精细的虚线样式 - 移动端适配\n    const dashScale = this.isSmallMobile ? 0.6 : this.isMobile ? 0.7 : Math.max(0.8, 1 / this.viewState.scale);\n\n    switch (edge.type) {\n      case 'l': // 基础锁定 - 红色\n        this.ctx.strokeStyle = '#ef4444';\n        this.ctx.setLineDash([3 * dashScale, 3 * dashScale]);\n        break;\n\n      case 'ld': // 门锁 - 金黄色\n        this.ctx.strokeStyle = '#fbbf24';\n        this.ctx.setLineDash([5 * dashScale, 2 * dashScale]);\n        break;\n\n      case 'lg': // 守卫 - 紫色\n        this.ctx.strokeStyle = '#8b5cf6';\n        this.ctx.setLineDash([6 * dashScale, 1 * dashScale, 1 * dashScale, 1 * dashScale]);\n        break;\n\n      case 'lb': // 障碍物 - 品红色\n        this.ctx.strokeStyle = '#ec4899';\n        this.ctx.setLineDash([2 * dashScale, 2 * dashScale]);\n        break;\n\n      case 'lh': // 隐藏入口 - 灰白色\n        this.ctx.strokeStyle = '#d1d5db';\n        this.ctx.setLineDash([0.8 * dashScale, 2.5 * dashScale]);\n        break;\n\n      case 'c':\n      default:\n        // 如果连接到不可达节点，使用灰色；否则使用蓝色\n        this.ctx.strokeStyle = isConnectedToUnreachable ? '#6b7280' : '#4a9eff';\n        this.ctx.setLineDash([]);\n    }\n\n    // 添加连接线发光效果\n    this.ctx.save();\n    const glowSize = (this.isSmallMobile ? 2 : this.isMobile ? 3 : 4) / this.viewState.scale;\n    this.ctx.shadowColor = this.ctx.strokeStyle;\n    this.ctx.shadowBlur = glowSize;\n\n    this.ctx.beginPath();\n    this.ctx.moveTo(from.x, from.y);\n    this.ctx.lineTo(to.x, to.y);\n    this.ctx.stroke();\n    this.ctx.restore();\n\n    // 重置虚线样式\n    this.ctx.setLineDash([]);\n  }\n\n  /**\n   * 检查边是否应该显示为不可用（灰色）\n   */\n  private isEdgeConnectedToUnreachableNode(edge: MapEdge): boolean {\n    if (!this.mapData?.currentLocation) return false;\n\n    const fromNode = this.mapData.nodes.find(n => n.id === edge.from);\n    const toNode = this.mapData.nodes.find(n => n.id === edge.to);\n    if (!fromNode || !toNode) return false;\n\n    // 如果连接当前位置，保持正常颜色\n    if (fromNode.id === this.mapData.currentLocation || toNode.id === this.mapData.currentLocation) {\n      return false;\n    }\n\n    // 如果任一节点不可达，则显示为灰色\n    return !this.isNodeReachable(fromNode) || !this.isNodeReachable(toNode);\n  }\n\n  /**\n   * 计算从一个节点指向另一个节点的边缘交点\n   */\n  private getNodeEdgePoint(node: any, targetNode: any): { x: number; y: number } {\n    const dx = targetNode.x - node.x;\n    const dy = targetNode.y - node.y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n\n    if (distance === 0) return { x: node.x, y: node.y };\n\n    const unitX = dx / distance;\n    const unitY = dy / distance;\n\n    if (node.shape === 'r') {\n      // 矩形节点边缘交点计算\n      const w = (node.width || 40) / 2;\n      const h = (node.height || 30) / 2;\n\n      // 计算射线与矩形边缘的交点\n      const tTop = -h / unitY;\n      const tBottom = h / unitY;\n      const tLeft = -w / unitX;\n      const tRight = w / unitX;\n\n      // 找到最小的正值t，即最近的交点\n      const validTs = [tTop, tBottom, tLeft, tRight].filter(t => t > 0);\n      const minT = Math.min(...validTs);\n\n      return {\n        x: node.x + unitX * minT,\n        y: node.y + unitY * minT,\n      };\n    } else {\n      // 圆形节点边缘交点计算\n      const radius = node.radius || 15;\n      return {\n        x: node.x + unitX * radius,\n        y: node.y + unitY * radius,\n      };\n    }\n  }\n\n  private drawNodes(): void {\n    if (!this.mapData) return;\n\n    this.mapData.nodes.forEach(node => {\n      const isCurrent = node.id === this.mapData!.currentLocation;\n      const isExit = node.type === 'e';\n      const isReachable = this.isNodeReachable(node);\n\n      // 设置节点颜色和发光效果\n      let strokeColor: string;\n      let fillColor: string;\n      let glowColor: string;\n\n      if (isCurrent) {\n        strokeColor = '#14b8a6';\n        fillColor = '#14b8a640';\n        glowColor = '#14b8a6';\n      } else if (!isReachable) {\n        strokeColor = '#6b7280';\n        fillColor = '#6b728040';\n        glowColor = '#6b7280';\n      } else if (isExit) {\n        strokeColor = '#22c55e';\n        fillColor = '#22c55e40';\n        glowColor = '#22c55e';\n      } else {\n        strokeColor = '#4a9eff';\n        fillColor = '#4a9eff40';\n        glowColor = '#4a9eff';\n      }\n\n      // 优化节点边框粗细\n      const baseLineWidth = this.isSmallMobile ? 0.8 : this.isMobile ? 1.0 : 1.2;\n      this.ctx.lineWidth = Math.max(0.4, baseLineWidth / this.viewState.scale);\n\n      // 绘制发光效果\n      const glowSize = (this.isSmallMobile ? 4 : this.isMobile ? 5 : 6) / this.viewState.scale;\n      this.ctx.save();\n\n      // 设置发光阴影\n      this.ctx.shadowColor = glowColor;\n      this.ctx.shadowBlur = glowSize;\n      this.ctx.strokeStyle = strokeColor;\n      this.ctx.fillStyle = fillColor;\n\n      this.ctx.beginPath();\n\n      if (node.shape === 'r') {\n        const w = node.width || 40;\n        const h = node.height || 30;\n        this.ctx.rect(node.x - w / 2, node.y - h / 2, w, h);\n      } else {\n        const r = node.radius || 15;\n        this.ctx.arc(node.x, node.y, r, 0, Math.PI * 2);\n      }\n\n      this.ctx.fill();\n      this.ctx.stroke();\n      this.ctx.restore();\n\n      // 绘制出口图标\n      if (isExit) {\n        this.drawExitIcon(node);\n      }\n    });\n  }\n\n  /**\n   * 判断节点是否可达（基于移动模式和边的状态）\n   */\n  private isNodeReachable(targetNode: MapNode): boolean {\n    if (!this.mapData?.currentLocation) return true;\n\n    const currentNode = this.mapData.nodes.find(n => n.id === this.mapData!.currentLocation);\n    if (!currentNode) return true;\n\n    // 如果是自由移动模式，所有节点都可达\n    if (this.mapData.free_movement === 'F') return true;\n\n    // 如果是禁止移动模式，除了当前位置外都不可达\n    if (this.mapData.free_movement === 'N') return targetNode.id === this.mapData.currentLocation;\n\n    // 临近移动模式：只有直接相邻且路径未锁定的节点才可达\n    const adjacentEdges = this.mapData.edges.filter(\n      edge =>\n        (edge.from === this.mapData!.currentLocation || edge.to === this.mapData!.currentLocation) && edge.type === 'c',\n    );\n\n    return adjacentEdges.some(edge => {\n      const connectedNodeId = edge.from === this.mapData!.currentLocation ? edge.to : edge.from;\n      return connectedNodeId === targetNode.id;\n    });\n  }\n\n  /**\n   * 绘制出口图标\n   */\n  private drawExitIcon(node: MapNode): void {\n    // 移动端优化：调整EXIT图标字体大小\n    const baseFontSize = this.isMobile ? 8 : 12;\n    const fontSize = baseFontSize / this.viewState.scale;\n    const iconY =\n      node.y + (node.shape === 'r' ? (node.height || 30) / 2 : node.radius || 15) + fontSize + 6 / this.viewState.scale;\n\n    // 测量文字尺寸以适应背景\n    this.ctx.font = `bold ${fontSize}px \"Segoe UI\", sans-serif`;\n    const textMetrics = this.ctx.measureText('EXIT');\n    const textWidth = textMetrics.width;\n    const textHeight = fontSize;\n\n    // 绘制圆角背景\n    const padding = 2 / this.viewState.scale;\n    const bgX = node.x - textWidth / 2 - padding;\n    const bgY = iconY - textHeight / 2 - 1 / this.viewState.scale;\n    const bgWidth = textWidth + padding * 2;\n    const bgHeight = textHeight + 2 / this.viewState.scale;\n    const cornerRadius = 2 / this.viewState.scale;\n\n    this.ctx.fillStyle = '#22c55e';\n    this.ctx.beginPath();\n    this.ctx.roundRect(bgX, bgY, bgWidth, bgHeight, cornerRadius);\n    this.ctx.fill();\n\n    // 绘制EXIT文字\n    this.ctx.fillStyle = '#ffffff';\n    this.ctx.textAlign = 'center';\n    this.ctx.textBaseline = 'middle';\n    this.ctx.fillText('EXIT', node.x, iconY);\n  }\n\n  private drawLabels(): void {\n    if (!this.mapData) return;\n\n    this.ctx.textAlign = 'center';\n    this.ctx.textBaseline = 'middle';\n\n    // 移动端优化：调整节点标签字体大小\n    const baseFontSize = this.isMobile ? 12 : 14;\n    const fontSize = baseFontSize / this.viewState.scale;\n    this.ctx.font = `${fontSize}px \"Segoe UI\", sans-serif`;\n\n    this.mapData.nodes.forEach(node => {\n      const isCurrent = node.id === this.mapData!.currentLocation;\n\n      // 设置标签颜色\n      this.ctx.fillStyle = isCurrent ? '#14b8a6' : '#e8eaf0';\n\n      if (node.label) {\n        this.ctx.fillText(node.label, node.x, node.y);\n      }\n\n      // 为当前位置添加文字标示\n      if (isCurrent) {\n        this.ctx.fillStyle = '#14b8a6';\n        this.ctx.font = `bold ${fontSize * 0.8}px \"Segoe UI\", sans-serif`;\n        this.ctx.textBaseline = 'top';\n\n        const labelY =\n          node.y + (node.shape === 'r' ? (node.height || 30) / 2 : node.radius || 15) + 8 / this.viewState.scale;\n        this.ctx.fillText('[当前位置]', node.x, labelY);\n\n        // 重置字体\n        this.ctx.font = `${fontSize}px \"Segoe UI\", sans-serif`;\n        this.ctx.textBaseline = 'middle';\n      }\n    });\n\n    // 绘制边类型信息\n    this.drawEdgeTypeInfo();\n  }\n\n  /**\n   * 在左下角绘制边类型信息\n   */\n  private drawEdgeTypeInfo(): void {\n    if (!this.mapData) return;\n\n    // 收集地图中存在的边类型\n    const edgeTypes = new Set(this.mapData.edges.map(edge => edge.type));\n    const typeInfos: Array<{ type: string; color: string; text: string; pattern: string }> = [];\n\n    if (edgeTypes.has('c')) typeInfos.push({ type: 'c', color: '#4a9eff', text: '普通路径', pattern: '────' });\n    if (edgeTypes.has('l')) typeInfos.push({ type: 'l', color: '#ef4444', text: '锁定路径', pattern: '- - -' });\n    if (edgeTypes.has('ld')) typeInfos.push({ type: 'ld', color: '#fbbf24', text: '门锁', pattern: '– – –' });\n    if (edgeTypes.has('lg')) typeInfos.push({ type: 'lg', color: '#8b5cf6', text: '守卫', pattern: '‒ ‒ ‒' });\n    if (edgeTypes.has('lb')) typeInfos.push({ type: 'lb', color: '#ec4899', text: '障碍', pattern: '··· ···' });\n    if (edgeTypes.has('lh')) typeInfos.push({ type: 'lh', color: '#d1d5db', text: '隐藏', pattern: '. . . .' });\n\n    if (typeInfos.length === 0) return;\n\n    // 保存当前变换状态并重置为屏幕坐标\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n\n    // 移动端优化：动态调整图例参数\n    const padding = this.isSmallMobile ? 8 : this.isMobile ? 10 : 12;\n    const lineHeight = this.isSmallMobile ? 18 : this.isMobile ? 17 : 14;\n    const fontSize = this.isSmallMobile ? 16 : this.isMobile ? 14 : 10;\n    const lineLength = this.isSmallMobile ? 30 : this.isMobile ? 28 : 20;\n    const backgroundWidth = this.isSmallMobile ? 120 : this.isMobile ? 110 : 90;\n\n    const startY = this.canvas.height - padding - typeInfos.length * lineHeight;\n\n    // 绘制半透明背景\n    this.ctx.fillStyle = 'rgba(22, 33, 62, 0.3)';\n    this.ctx.fillRect(padding - 6, startY - 10, backgroundWidth, typeInfos.length * lineHeight + 16);\n\n    this.ctx.font = `${fontSize}px \"Segoe UI\", sans-serif`;\n    this.ctx.textAlign = 'left';\n    this.ctx.textBaseline = 'top';\n\n    typeInfos.forEach((info, index) => {\n      const y = startY + index * lineHeight;\n\n      // 优化图例线条绘制质量 - 移动端更细\n      this.ctx.strokeStyle = info.color;\n      this.ctx.lineWidth = this.isSmallMobile ? 1.2 : this.isMobile ? 1.4 : 1.5;\n\n      // 设置圆润的线条样式\n      this.ctx.lineCap = 'round';\n      this.ctx.lineJoin = 'round';\n\n      // 根据边类型设置线条样式（移动端适配）\n      const dashScale = 1;\n      switch (info.type) {\n        case 'l':\n          this.ctx.setLineDash([3 * dashScale, 3 * dashScale]);\n          break;\n        case 'ld':\n          this.ctx.setLineDash([5 * dashScale, 2 * dashScale]);\n          break;\n        case 'lg':\n          this.ctx.setLineDash([6 * dashScale, 1 * dashScale, 1 * dashScale, 1 * dashScale]);\n          break;\n        case 'lb':\n          this.ctx.setLineDash([2 * dashScale, 2 * dashScale]);\n          break;\n        case 'lh':\n          this.ctx.setLineDash([0.8 * dashScale, 2.5 * dashScale]);\n          break;\n        default:\n          this.ctx.setLineDash([]);\n      }\n\n      // 为图例线条添加发光效果\n      this.ctx.save();\n      this.ctx.shadowColor = info.color;\n      this.ctx.shadowBlur = 3;\n\n      this.ctx.beginPath();\n      this.ctx.moveTo(padding, y + lineHeight / 2);\n      this.ctx.lineTo(padding + lineLength, y + lineHeight / 2);\n      this.ctx.stroke();\n      this.ctx.restore();\n      this.ctx.setLineDash([]); // 重置\n\n      // 绘制文字说明\n      this.ctx.fillStyle = '#e8eaf0';\n      this.ctx.fillText(info.text, padding + lineLength + 8, y + 2);\n    });\n\n    // 恢复变换状态\n    this.ctx.restore();\n  }\n\n  /**\n   * 获取当前视图状态（供外部访问）\n   */\n  public getViewState(): ViewState {\n    return { ...this.viewState };\n  }\n\n  /**\n   * 设置视图状态（供外部控制）\n   */\n  public setViewState(newState: Partial<ViewState>): void {\n    Object.assign(this.viewState, newState);\n    this.render();\n  }\n\n  /**\n   * 重置视图到适合的初始状态\n   */\n  public resetToFit(): void {\n    this.resetView();\n    this.render();\n  }\n\n  /**\n   * 获取地图边界（供交互控制器使用）\n   */\n  public getMapBounds() {\n    if (!this.mapData || this.mapData.nodes.length === 0) return null;\n\n    const xs = this.mapData.nodes.map(n => n.x);\n    const ys = this.mapData.nodes.map(n => n.y);\n\n    return {\n      minX: Math.min(...xs),\n      maxX: Math.max(...xs),\n      minY: Math.min(...ys),\n      maxY: Math.max(...ys),\n    };\n  }\n\n  /**\n   * 清理资源\n   */\n  public cleanup(): void {\n    this.mapData = null;\n  }\n}\n","import { InteractionState } from '../types';\nimport { CanvasRenderer } from './canvas-renderer';\n\n/**\n * 地图交互控制器\n * 负责处理所有地图交互事件（缩放、拖拽等）\n */\nexport class MapInteraction {\n  private readonly canvas: HTMLCanvasElement;\n  private readonly renderer: CanvasRenderer;\n  private readonly interactionState: InteractionState;\n\n  // 交互配置\n  private readonly config = {\n    minScale: 0.1,\n    maxScale: 5.0,\n    zoomSensitivity: 0.001,\n    touchZoomSensitivity: 0.005,\n    panSensitivity: 1.0,\n  };\n\n  constructor(canvas: HTMLCanvasElement, renderer: CanvasRenderer) {\n    this.canvas = canvas;\n    this.renderer = renderer;\n\n    this.interactionState = {\n      isDragging: false,\n      lastPointerX: 0,\n      lastPointerY: 0,\n      lastScale: 1,\n    };\n\n    this.setupInteractions();\n  }\n\n  /**\n   * 设置交互事件监听\n   */\n  private setupInteractions(): void {\n    // 桌面端事件\n    this.canvas.addEventListener('wheel', this.handleWheel.bind(this));\n    this.canvas.addEventListener('mousedown', this.handlePointerStart.bind(this));\n    this.canvas.addEventListener('mousemove', this.handlePointerMove.bind(this));\n    this.canvas.addEventListener('mouseup', this.handlePointerEnd.bind(this));\n    this.canvas.addEventListener('mouseleave', this.handlePointerEnd.bind(this));\n\n    // 移动端事件\n    this.canvas.addEventListener('touchstart', this.handleTouchStart.bind(this), { passive: false });\n    this.canvas.addEventListener('touchmove', this.handleTouchMove.bind(this), { passive: false });\n    this.canvas.addEventListener('touchend', this.handleTouchEnd.bind(this), { passive: false });\n\n    // 阻止默认的上下文菜单\n    this.canvas.addEventListener('contextmenu', e => e.preventDefault());\n  }\n\n  /**\n   * 鼠标滚轮缩放\n   */\n  private handleWheel(event: WheelEvent): void {\n    event.preventDefault();\n\n    const rect = this.canvas.getBoundingClientRect();\n    const mouseX = event.clientX - rect.left;\n    const mouseY = event.clientY - rect.top;\n\n    this.zoomAt(mouseX, mouseY, -event.deltaY * this.config.zoomSensitivity);\n  }\n\n  /**\n   * 指针开始事件（鼠标）\n   */\n  private handlePointerStart(event: MouseEvent): void {\n    if (event.button !== 0) return; // 只处理左键\n\n    this.startDrag(event.clientX, event.clientY);\n    this.canvas.style.cursor = 'grabbing';\n  }\n\n  /**\n   * 指针移动事件（鼠标）\n   */\n  private handlePointerMove(event: MouseEvent): void {\n    if (this.interactionState.isDragging) {\n      this.updateDrag(event.clientX, event.clientY);\n    }\n  }\n\n  /**\n   * 指针结束事件（鼠标）\n   */\n  private handlePointerEnd(): void {\n    this.endDrag();\n    this.canvas.style.cursor = 'grab';\n  }\n\n  /**\n   * 触摸开始事件\n   */\n  private handleTouchStart(event: TouchEvent): void {\n    event.preventDefault();\n\n    if (event.touches.length === 1) {\n      // 单指拖拽\n      const touch = event.touches[0];\n      this.startDrag(touch.clientX, touch.clientY);\n    } else if (event.touches.length === 2) {\n      // 双指缩放\n      const touch1 = event.touches[0];\n      const touch2 = event.touches[1];\n      const distance = this.getTouchDistance(touch1, touch2);\n\n      this.interactionState.startPinchDistance = distance;\n      this.interactionState.lastScale = this.renderer.getViewState().scale;\n\n      // 结束拖拽状态\n      this.interactionState.isDragging = false;\n    }\n  }\n\n  /**\n   * 触摸移动事件\n   */\n  private handleTouchMove(event: TouchEvent): void {\n    event.preventDefault();\n\n    if (event.touches.length === 1 && this.interactionState.isDragging) {\n      // 单指拖拽\n      const touch = event.touches[0];\n      this.updateDrag(touch.clientX, touch.clientY);\n    } else if (event.touches.length === 2 && this.interactionState.startPinchDistance) {\n      // 双指缩放\n      const touch1 = event.touches[0];\n      const touch2 = event.touches[1];\n      const currentDistance = this.getTouchDistance(touch1, touch2);\n\n      const scaleChange =\n        (currentDistance - this.interactionState.startPinchDistance!) * this.config.touchZoomSensitivity;\n      const newScale = Math.max(\n        this.config.minScale,\n        Math.min(this.config.maxScale, this.interactionState.lastScale + scaleChange),\n      );\n\n      // 以双指中心点为缩放中心\n      const centerX = (touch1.clientX + touch2.clientX) / 2;\n      const centerY = (touch1.clientY + touch2.clientY) / 2;\n      const rect = this.canvas.getBoundingClientRect();\n\n      this.zoomAt(centerX - rect.left, centerY - rect.top, newScale, false);\n    }\n  }\n\n  /**\n   * 触摸结束事件\n   */\n  private handleTouchEnd(event: TouchEvent): void {\n    event.preventDefault();\n\n    if (event.touches.length === 0) {\n      this.endDrag();\n      this.interactionState.startPinchDistance = undefined;\n    } else if (event.touches.length === 1) {\n      // 从双指切换到单指，重新开始拖拽\n      this.interactionState.startPinchDistance = undefined;\n      const touch = event.touches[0];\n      this.startDrag(touch.clientX, touch.clientY);\n    }\n  }\n\n  /**\n   * 开始拖拽\n   */\n  private startDrag(clientX: number, clientY: number): void {\n    this.interactionState.isDragging = true;\n    this.interactionState.lastPointerX = clientX;\n    this.interactionState.lastPointerY = clientY;\n  }\n\n  /**\n   * 更新拖拽\n   */\n  private updateDrag(clientX: number, clientY: number): void {\n    if (!this.interactionState.isDragging) return;\n\n    const deltaX = clientX - this.interactionState.lastPointerX;\n    const deltaY = clientY - this.interactionState.lastPointerY;\n\n    // 获取当前视图状态\n    const viewState = this.renderer.getViewState();\n\n    // 应用拖拽偏移（除以缩放以保持一致的拖拽速度）\n    const newOffsetX = viewState.offsetX + (deltaX / viewState.scale) * this.config.panSensitivity;\n    const newOffsetY = viewState.offsetY + (deltaY / viewState.scale) * this.config.panSensitivity;\n\n    this.renderer.setViewState({\n      offsetX: newOffsetX,\n      offsetY: newOffsetY,\n    });\n\n    this.interactionState.lastPointerX = clientX;\n    this.interactionState.lastPointerY = clientY;\n  }\n\n  /**\n   * 结束拖拽\n   */\n  private endDrag(): void {\n    this.interactionState.isDragging = false;\n  }\n\n  /**\n   * 在指定点进行缩放\n   */\n  private zoomAt(canvasX: number, canvasY: number, deltaScale: number, isRelative: boolean = true): void {\n    const viewState = this.renderer.getViewState();\n    const oldScale = viewState.scale;\n    const newScale = isRelative\n      ? Math.max(this.config.minScale, Math.min(this.config.maxScale, oldScale + deltaScale))\n      : Math.max(this.config.minScale, Math.min(this.config.maxScale, deltaScale));\n\n    if (newScale === oldScale) return;\n\n    // 计算缩放中心在世界坐标系中的位置\n    const rect = this.canvas.getBoundingClientRect();\n    const worldX = (canvasX - rect.width / 2) / oldScale - viewState.offsetX;\n    const worldY = (canvasY - rect.height / 2) / oldScale - viewState.offsetY;\n\n    // 调整偏移以保持缩放中心不变\n    const newOffsetX = (canvasX - rect.width / 2) / newScale - worldX;\n    const newOffsetY = (canvasY - rect.height / 2) / newScale - worldY;\n\n    this.renderer.setViewState({\n      scale: newScale,\n      offsetX: newOffsetX,\n      offsetY: newOffsetY,\n    });\n  }\n\n  /**\n   * 计算两个触摸点之间的距离\n   */\n  private getTouchDistance(touch1: Touch, touch2: Touch): number {\n    const dx = touch1.clientX - touch2.clientX;\n    const dy = touch1.clientY - touch2.clientY;\n    return Math.sqrt(dx * dx + dy * dy);\n  }\n\n  /**\n   * 程序化控制方法\n   */\n  public zoomIn(): void {\n    const viewState = this.renderer.getViewState();\n    const newScale = Math.min(this.config.maxScale, viewState.scale * 1.2);\n    this.renderer.setViewState({ scale: newScale });\n  }\n\n  public zoomOut(): void {\n    const viewState = this.renderer.getViewState();\n    const newScale = Math.max(this.config.minScale, viewState.scale / 1.2);\n    this.renderer.setViewState({ scale: newScale });\n  }\n\n  public setScale(scale: number): void {\n    const clampedScale = Math.max(this.config.minScale, Math.min(this.config.maxScale, scale));\n    this.renderer.setViewState({ scale: clampedScale });\n  }\n\n  public resetView(mapBounds?: { minX: number; maxX: number; minY: number; maxY: number }): void {\n    if (mapBounds) {\n      // 重置到适合地图内容的视图\n      const mapWidth = mapBounds.maxX - mapBounds.minX;\n      const mapHeight = mapBounds.maxY - mapBounds.minY;\n      const rect = this.canvas.getBoundingClientRect();\n\n      if (mapWidth === 0 && mapHeight === 0) {\n        this.renderer.setViewState({\n          offsetX: -((mapBounds.minX + mapBounds.maxX) / 2),\n          offsetY: -((mapBounds.minY + mapBounds.maxY) / 2),\n          scale: 1,\n        });\n      } else {\n        let scale = 1;\n        if (rect.width > 0 && rect.height > 0) {\n          const scaleX = mapWidth > 0 ? (rect.width * 0.8) / mapWidth : 1;\n          const scaleY = mapHeight > 0 ? (rect.height * 0.8) / mapHeight : 1;\n          scale = Math.min(scaleX, scaleY);\n          scale = Math.min(Math.max(scale, this.config.minScale), this.config.maxScale);\n        }\n\n        this.renderer.setViewState({\n          offsetX: -((mapBounds.minX + mapBounds.maxX) / 2),\n          offsetY: -((mapBounds.minY + mapBounds.maxY) / 2),\n          scale: scale,\n        });\n      }\n    } else {\n      // 简单重置\n      this.renderer.setViewState({\n        offsetX: 0,\n        offsetY: 0,\n        scale: 1,\n      });\n    }\n  }\n\n  /**\n   * 获取当前交互状态\n   */\n  public getInteractionState(): InteractionState {\n    return { ...this.interactionState };\n  }\n\n  /**\n   * 清理交互监听器\n   */\n  public cleanup(): void {\n    this.canvas.removeEventListener('wheel', this.handleWheel.bind(this));\n    this.canvas.removeEventListener('mousedown', this.handlePointerStart.bind(this));\n    this.canvas.removeEventListener('mousemove', this.handlePointerMove.bind(this));\n    this.canvas.removeEventListener('mouseup', this.handlePointerEnd.bind(this));\n    this.canvas.removeEventListener('mouseleave', this.handlePointerEnd.bind(this));\n    this.canvas.removeEventListener('touchstart', this.handleTouchStart.bind(this));\n    this.canvas.removeEventListener('touchmove', this.handleTouchMove.bind(this));\n    this.canvas.removeEventListener('touchend', this.handleTouchEnd.bind(this));\n    this.canvas.removeEventListener('contextmenu', e => e.preventDefault());\n  }\n}\n","import { EdgeType, MapData, MapEdge, MapNode } from '../types';\n\n/**\n * 地图数据解析器 - 简化版本\n */\nexport class MapParser {\n  private static readonly MAP_REGEX = /<MapGraph>(.*?)<\\/MapGraph>/s;\n  private static readonly LOOSE_MAP_REGEX = /<\\s*MapGraph\\s*>([\\s\\S]*?)<\\s*\\/\\s*MapGraph\\s*>/i;\n\n  /**\n   * 从消息文本中提取地图数据\n   */\n  static extractMapFromText(text: string): string | null {\n    const match = this.MAP_REGEX.exec(text) || this.LOOSE_MAP_REGEX.exec(text);\n    return match ? match[1] : null;\n  }\n\n  /**\n   * 解析地图数据\n   */\n  static parseMapData(text: string): MapData {\n    const lines = text.split('\\n');\n    const mapData: MapData = {\n      nodes: [],\n      edges: [],\n      metadata: {},\n      currentLocation: null,\n      free_movement: 'A', // Adjacent by default\n    };\n\n    const nodeIds = new Set<string>();\n\n    lines.forEach(line => {\n      const trimmedLine = line.trim();\n      if (!trimmedLine || trimmedLine.startsWith('#')) return;\n\n      // 解析节点 n:id|type|label@characters|x|y|shape|dimensions\n      const nodeMatch = /^n:([^|]+)\\|([^|]+)\\|([^|@]+)(?:@([^|]*))?(?:\\|)(\\d+)\\|(\\d+)\\|([rc])\\|(.*)$/i.exec(\n        trimmedLine,\n      );\n\n      if (nodeMatch) {\n        const node = this.parseNode(nodeMatch);\n        if (node && !nodeIds.has(node.id)) {\n          nodeIds.add(node.id);\n          mapData.nodes.push(node);\n\n          // 检查当前位置标记\n          if (node.characters.includes('current') || node.characters.includes('')) {\n            mapData.currentLocation = node.id;\n          }\n        }\n        return;\n      }\n\n      // 解析边 e:from|to|type\n      const edgeMatch = /^e:([^|]+)\\|([^|]+)(?:\\|([^|]+))?$/i.exec(trimmedLine);\n      if (edgeMatch) {\n        const edge = this.parseEdge(edgeMatch);\n        if (edge) mapData.edges.push(edge);\n        return;\n      }\n\n      // 解析元数据 m:key=value\n      const metadataMatch = /^m:([^=]+)=(.*)$/i.exec(trimmedLine);\n      if (metadataMatch) {\n        this.parseMetadata(metadataMatch, mapData);\n      }\n    });\n\n    // 验证边的有效性\n    const validNodeIds = new Set(mapData.nodes.map(n => n.id));\n    mapData.edges = mapData.edges.filter(edge => validNodeIds.has(edge.from) && validNodeIds.has(edge.to));\n\n    return mapData;\n  }\n\n  private static parseNode(match: RegExpMatchArray): MapNode | null {\n    const [, id, type, labelRaw, charactersStr, xStr, yStr, shapeCode, dimensions] = match;\n\n    const x = parseInt(xStr, 10);\n    const y = parseInt(yStr, 10);\n\n    if (isNaN(x) || isNaN(y)) return null;\n\n    const node: MapNode = {\n      id: id.trim(),\n      type: type.trim(),\n      label: labelRaw.trim(),\n      x,\n      y,\n      shape: shapeCode.toLowerCase().trim() as 'r' | 'c',\n      characters: charactersStr\n        ? charactersStr\n            .split(',')\n            .map(s => s.trim())\n            .filter(Boolean)\n        : [],\n    };\n\n    // 设置节点尺寸\n    if (node.shape === 'r') {\n      const sizeMatch = /^(\\d+)x(\\d+)$/i.exec(dimensions);\n      if (sizeMatch) {\n        node.width = parseInt(sizeMatch[1], 10);\n        node.height = parseInt(sizeMatch[2], 10);\n      } else {\n        node.width = 40;\n        node.height = 30;\n      }\n    } else if (node.shape === 'c') {\n      const radius = parseInt(dimensions, 10);\n      node.radius = isNaN(radius) ? 15 : radius;\n    }\n\n    return node;\n  }\n\n  private static parseEdge(match: RegExpMatchArray): MapEdge | null {\n    const [, from, to, typeCode] = match;\n    return {\n      from: from.trim(),\n      to: to.trim(),\n      type: (typeCode ? typeCode.trim() : 'c') as EdgeType,\n    };\n  }\n\n  private static parseMetadata(match: RegExpMatchArray, mapData: MapData): void {\n    const [, key, value] = match;\n    const trimmedKey = key.trim().toLowerCase();\n\n    if (trimmedKey === 'fm') {\n      const moveVal = value.trim().toUpperCase();\n      if (['F', 'A', 'N'].includes(moveVal)) {\n        mapData.free_movement = moveVal as 'F' | 'A' | 'N';\n      }\n    } else if (trimmedKey === 'desc') {\n      mapData.metadata['description'] = value.trim();\n    } else {\n      mapData.metadata[trimmedKey] = value.trim();\n    }\n  }\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"map_controls\" };\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'MapControls',\n    emits: [\"zoom-in\", \"zoom-out\", \"reset-view\"],\n    setup(__props) {\n        // 事件定义\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"button\", {\n                    class: \"control_button zoom_in\",\n                    onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('zoom-in'))),\n                    onTouchstart: _cache[1] || (_cache[1] = _withModifiers(($event) => (_ctx.$emit('zoom-in')), [\"prevent\"])),\n                    title: \"放大\"\n                }, [...(_cache[6] || (_cache[6] = [\n                        _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */)\n                    ]))], 32 /* NEED_HYDRATION */),\n                _createElementVNode(\"button\", {\n                    class: \"control_button zoom_out\",\n                    onClick: _cache[2] || (_cache[2] = ($event) => (_ctx.$emit('zoom-out'))),\n                    onTouchstart: _cache[3] || (_cache[3] = _withModifiers(($event) => (_ctx.$emit('zoom-out')), [\"prevent\"])),\n                    title: \"缩小\"\n                }, [...(_cache[7] || (_cache[7] = [\n                        _createElementVNode(\"i\", { class: \"fa-solid fa-minus\" }, null, -1 /* CACHED */)\n                    ]))], 32 /* NEED_HYDRATION */),\n                _createElementVNode(\"button\", {\n                    class: \"control_button reset_view\",\n                    onClick: _cache[4] || (_cache[4] = ($event) => (_ctx.$emit('reset-view'))),\n                    onTouchstart: _cache[5] || (_cache[5] = _withModifiers(($event) => (_ctx.$emit('reset-view')), [\"prevent\"])),\n                    title: \"重置视图\"\n                }, [...(_cache[8] || (_cache[8] = [\n                        _createElementVNode(\"i\", { class: \"fa-solid fa-expand-arrows-alt\" }, null, -1 /* CACHED */)\n                    ]))], 32 /* NEED_HYDRATION */)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./MapControls.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MapControls.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MapControls.vue?vue&type=style&index=0&id=2de7aaed&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2de7aaed\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"map_graph\" };\nconst _hoisted_2 = { class: \"map_container\" };\nconst _hoisted_3 = { class: \"map_title_bar\" };\nconst _hoisted_4 = { class: \"map_title\" };\nconst _hoisted_5 = { class: \"map_movement\" };\nconst _hoisted_6 = {\n    key: 0,\n    class: \"zoom_indicator\"\n};\nimport { computed, onMounted, onUnmounted, ref, watch } from 'vue';\nimport { CanvasRenderer } from '../core/canvas-renderer';\nimport { MapInteraction } from '../core/map-interaction';\nimport { MapParser } from '../core/map-parser';\nimport MapControls from './MapControls.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'MapContainer',\n    props: {\n        mapText: {}\n    },\n    setup(__props) {\n        const props = __props;\n        // Refs\n        const mapCanvas = ref(null);\n        // State\n        let renderer = null;\n        let interaction = null;\n        let resizeObserver = null;\n        const mapData = ref(null);\n        const isDragging = ref(false);\n        const currentZoom = ref(1);\n        const showZoomIndicator = ref(false);\n        let zoomIndicatorTimer = null;\n        // Computed\n        const title = computed(() => {\n            return mapData.value?.metadata.description || '交互式地图系统';\n        });\n        const movementIcon = computed(() => {\n            const icons = {\n                F: { class: 'fa-solid fa-arrows-alt', text: '自由移动模式' },\n                A: { class: 'fa-solid fa-route', text: '临近移动模式' },\n                N: { class: 'fa-solid fa-ban', text: '禁止移动模式' },\n            };\n            return icons[mapData.value?.free_movement || 'A'] || icons['A'];\n        });\n        // Methods\n        const parseMapData = () => {\n            if (!props.mapText)\n                return;\n            try {\n                mapData.value = MapParser.parseMapData(props.mapText);\n            }\n            catch (error) {\n                console.error('[MapComponent] 解析地图数据失败:', error);\n            }\n        };\n        const initializeRenderer = () => {\n            if (!mapCanvas.value || !mapData.value)\n                return;\n            try {\n                renderer = new CanvasRenderer(mapCanvas.value);\n                renderer.setMapData(mapData.value);\n                // 初始化交互控制器\n                interaction = new MapInteraction(mapCanvas.value, renderer);\n                setupDragStateListener();\n                setupCanvasResize();\n                updateZoomIndicator();\n            }\n            catch (error) {\n                console.error('[MapComponent] 渲染器初始化失败:', error);\n            }\n        };\n        /**\n         * 处理放大事件\n         */\n        const handleZoomIn = () => {\n            if (!interaction)\n                return;\n            interaction.zoomIn();\n            updateZoomIndicator();\n            showZoomIndicatorTemporarily();\n        };\n        /**\n         * 处理缩小事件\n         */\n        const handleZoomOut = () => {\n            if (!interaction)\n                return;\n            interaction.zoomOut();\n            updateZoomIndicator();\n            showZoomIndicatorTemporarily();\n        };\n        /**\n         * 处理重置视图事件\n         */\n        const handleResetView = () => {\n            if (!interaction || !renderer)\n                return;\n            const mapBounds = renderer.getMapBounds();\n            interaction.resetView(mapBounds || undefined);\n            updateZoomIndicator();\n            showZoomIndicatorTemporarily();\n        };\n        /**\n         * 设置拖拽状态监听\n         */\n        const setupDragStateListener = () => {\n            if (!mapCanvas.value)\n                return;\n            let dragTimeout;\n            const canvas = mapCanvas.value;\n            const startDrag = () => {\n                isDragging.value = true;\n                clearTimeout(dragTimeout);\n            };\n            const endDrag = () => {\n                clearTimeout(dragTimeout);\n                dragTimeout = setTimeout(() => {\n                    isDragging.value = false;\n                }, 100);\n            };\n            canvas.addEventListener('mousedown', startDrag);\n            canvas.addEventListener('touchstart', startDrag);\n            canvas.addEventListener('mouseup', endDrag);\n            canvas.addEventListener('mouseleave', endDrag);\n            canvas.addEventListener('touchend', endDrag);\n        };\n        /**\n         * 更新缩放指示器\n         */\n        const updateZoomIndicator = () => {\n            if (renderer) {\n                currentZoom.value = renderer.getViewState().scale;\n            }\n        };\n        /**\n         * 临时显示缩放指示器\n         */\n        const showZoomIndicatorTemporarily = () => {\n            showZoomIndicator.value = true;\n            if (zoomIndicatorTimer) {\n                clearTimeout(zoomIndicatorTimer);\n            }\n            zoomIndicatorTimer = setTimeout(() => {\n                showZoomIndicator.value = false;\n            }, 1500);\n        };\n        const setupCanvasResize = () => {\n            if (!mapCanvas.value || !renderer)\n                return;\n            resizeObserver = new ResizeObserver(() => {\n                if (renderer) {\n                    renderer.render();\n                }\n            });\n            resizeObserver.observe(mapCanvas.value);\n        };\n        const cleanup = () => {\n            if (renderer) {\n                renderer.cleanup();\n                renderer = null;\n            }\n            if (interaction) {\n                interaction.cleanup();\n                interaction = null;\n            }\n            if (resizeObserver) {\n                resizeObserver.disconnect();\n                resizeObserver = null;\n            }\n            if (zoomIndicatorTimer) {\n                clearTimeout(zoomIndicatorTimer);\n                zoomIndicatorTimer = null;\n            }\n        };\n        // Watchers\n        watch(() => props.mapText, () => {\n            parseMapData();\n            if (mapData.value && renderer) {\n                renderer.setMapData(mapData.value);\n            }\n        }, { immediate: true });\n        // Lifecycle\n        onMounted(() => {\n            parseMapData();\n            // 在移动端需要更长的延迟确保DOM完全就绪和容器尺寸稳定\n            const delay = window.innerWidth <= 768 ? 200 : 100;\n            setTimeout(() => {\n                initializeRenderer();\n            }, delay);\n        });\n        onUnmounted(() => {\n            cleanup();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _createElementVNode(\"div\", _hoisted_4, _toDisplayString(title.value), 1 /* TEXT */),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _createElementVNode(\"i\", {\n                                class: _normalizeClass(movementIcon.value.class)\n                            }, null, 2 /* CLASS */),\n                            _createTextVNode(_toDisplayString(movementIcon.value.text), 1 /* TEXT */)\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", {\n                        class: _normalizeClass([\"monitor-screen\", { grabbing: isDragging.value }])\n                    }, [\n                        _createElementVNode(\"canvas\", {\n                            ref_key: \"mapCanvas\",\n                            ref: mapCanvas\n                        }, null, 512 /* NEED_PATCH */),\n                        _createCommentVNode(\" 使用独立的控制组件 \"),\n                        _createVNode(MapControls, {\n                            onZoomIn: handleZoomIn,\n                            onZoomOut: handleZoomOut,\n                            onResetView: handleResetView\n                        }),\n                        _createCommentVNode(\" 缩放提示 \"),\n                        (showZoomIndicator.value)\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _toDisplayString(Math.round(currentZoom.value * 100)) + \"%\", 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true)\n                    ], 2 /* CLASS */)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./MapContainer.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MapContainer.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MapContainer.vue?vue&type=style&index=0&id=ca1729aa&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.22_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ca1729aa\"]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport MapContainer from './components/MapContainer.vue';\nimport { MapParser } from './core/map-parser';\n\n/**\n * 地图图形系统管理器\n */\nclass MapGraphManager {\n  private static instance: MapGraphManager | null = null;\n  private readonly activeApps = new Map<string, any>();\n\n  private constructor() {\n    this.setupEventListeners();\n  }\n\n  public static getInstance(): MapGraphManager {\n    this.instance ??= new MapGraphManager();\n    return this.instance;\n  }\n\n  /**\n   * 渲染单条消息中的地图\n   */\n  public renderMessage = async (messageId: string | number) => {\n    try {\n      const messages = getChatMessages(parseInt(messageId.toString(), 10));\n      if (!messages?.length || !messages[0]?.message) return;\n\n      const message = messages[0].message;\n\n      // 使用地图解析器提取地图文本\n      const mapText = MapParser.extractMapFromText(message);\n      if (!mapText) return;\n\n      const $mesText = this.findMessageElement(messageId.toString());\n      if (!$mesText?.length) return;\n\n      // 清理现有地图\n      this.cleanupMessage(messageId.toString());\n\n      // 创建新的地图组件\n      this.createMapContainer($mesText, mapText, messageId.toString());\n    } catch (error) {\n      console.error(`[MapGraph] 渲染消息 ${messageId} 失败:`, error);\n    }\n  };\n\n  /**\n   * 查找消息元素\n   */\n  private findMessageElement(messageId: string): JQuery<HTMLElement> {\n    const selectors = [`.mes[mesid=\"${messageId}\"] .mes_text`, `.mes[mesid=\"${messageId}\"]`];\n\n    for (const selector of selectors) {\n      const $element = $(selector, window.parent.document);\n      if ($element.length > 0) {\n        const $mesText = $element.find('.mes_text');\n        return $mesText.length > 0 ? $mesText : $element;\n      }\n    }\n\n    return $();\n  }\n\n  /**\n   * 创建地图组件\n   */\n  private createMapContainer($container: JQuery<HTMLElement>, mapText: string, messageId: string): void {\n    try {\n      // 使用解析器验证地图数据\n      const mapData = MapParser.parseMapData(mapText);\n      if (!mapData || mapData.nodes.length === 0) {\n        console.warn(`[MapGraph] 地图数据为空或无效: ${messageId}`);\n        return;\n      }\n\n      // 创建挂载点\n      const mountId = `map-mount-${messageId}`;\n      const $mountPoint = $(`<div id=\"${mountId}\"></div>`);\n      $container.append($mountPoint);\n\n      // 创建Vue应用，传入解析后的地图文本\n      const app = createApp(MapContainer, {\n        mapText: mapText,\n      });\n\n      // 挂载应用\n      app.mount($mountPoint[0]);\n\n      // 处理样式注入到酒馆页面 <head>\n      setTimeout(() => {\n        this.teleportStyle();\n      }, 100);\n\n      // 存储应用实例\n      this.activeApps.set(messageId, {\n        app,\n        mountPoint: $mountPoint,\n        mapData,\n      });\n    } catch (error) {\n      console.error(`[MapGraph] 创建地图组件失败:`, error);\n    }\n  }\n\n  /**\n   * 将样式传送到酒馆页面的 <head> 中\n   */\n  private teleportStyle(): void {\n    // 避免重复注入\n    if ($(`head > div[script_id=\"${getScriptId()}\"]`, window.parent.document).length) {\n      return;\n    }\n\n    $(`<div>`)\n      .attr('script_id', getScriptId())\n      .append($(`head > style`, document).clone())\n      .appendTo($('head', window.parent.document));\n\n    console.log('[MapGraph] 样式已注入到酒馆页面 <head>');\n  }\n\n  /**\n   * 从酒馆页面移除样式\n   */\n  private deteleportStyle(): void {\n    $(`head > div[script_id=\"${getScriptId()}\"]`, window.parent.document).remove();\n  }\n\n  /**\n   * 清理消息中的地图组件\n   */\n  private cleanupMessage(messageId: string): void {\n    const appData = this.activeApps.get(messageId);\n    if (appData) {\n      try {\n        appData.app.unmount();\n        appData.mountPoint.remove();\n        this.activeApps.delete(messageId);\n      } catch (error) {\n        console.error(`[MapGraph] 清理组件失败:`, error);\n      }\n    }\n  }\n\n  /**\n   * 设置事件监听\n   */\n  private setupEventListeners(): void {\n    // 监听消息渲染事件\n    const handleMessageEvent = _.debounce(async (messageId: number) => {\n      await this.renderMessage(messageId);\n    }, 500);\n\n    eventOn(tavern_events.MESSAGE_RECEIVED, handleMessageEvent);\n    eventOn(tavern_events.MESSAGE_UPDATED, handleMessageEvent);\n    eventOn(tavern_events.MESSAGE_SWIPED, handleMessageEvent);\n    eventOn(tavern_events.CHARACTER_MESSAGE_RENDERED, handleMessageEvent);\n  }\n\n  /**\n   * 清理所有地图组件\n   */\n  public cleanup(): void {\n    this.activeApps.forEach((_appData, messageId) => {\n      this.cleanupMessage(messageId);\n    });\n    this.activeApps.clear();\n    this.deteleportStyle();\n  }\n\n  /**\n   * 获取活跃的地图统计\n   */\n  public getStats() {\n    return {\n      activeApps: this.activeApps.size,\n      mapData: Array.from(this.activeApps.values()).map(app => ({\n        nodeCount: app.mapData?.nodes?.length || 0,\n        edgeCount: app.mapData?.edges?.length || 0,\n        movement: app.mapData?.free_movement,\n      })),\n    };\n  }\n}\n\n// 全局管理器实例\nlet mapManager: MapGraphManager;\n\n// 初始化\n$(() => {\n  mapManager = MapGraphManager.getInstance();\n\n  // 监听应用就绪事件\n  eventOn(tavern_events.APP_READY, () => {\n    setTimeout(() => {\n      mapManager.renderMessage(getLastMessageId());\n    }, 1000);\n  });\n\n  console.log('[MapGraph] 地图图形系统已初始化');\n});\n\n// 页面卸载时清理\n$(window).on('pagehide', () => {\n  if (mapManager) {\n    mapManager.cleanup();\n  }\n});\n\n// 导出供外部使用\nexport { MapGraphManager };\n"],"names":["module","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","id","_k","push","___CSS_LOADER_EXPORT___","__esModule","default","locals","add","listToStyles","parentId","styles","newStyles","part","css","sourceMap","parts","hasDocument","document","DEBUG","Error","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","options","ssrIdKey","isOldIE","navigator","test","userAgent","toLowerCase","addStylesClient","_isProduction","_options","addStylesToDom","newList","mayRemove","domStyle","refs","j","addStyle","createStyleElement","styleElement","createElement","type","appendChild","obj","update","remove","querySelector","parentNode","removeChild","styleIndex","applyToSingletonTag","bind","applyToTag","newObj","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","sources","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","sfc","props","target","__vccOpts","key","val","cssMapping","base64","data","sourceMapping","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","Vue","CanvasRenderer","canvas","ctx","viewState","mapData","isMobile","window","innerWidth","isSmallMobile","constructor","getContext","offsetX","offsetY","scale","setupCanvas","updateCanvasSize","optimizeCanvasQuality","imageSmoothingEnabled","imageSmoothingQuality","lineCap","lineJoin","dpr","devicePixelRatio","rect","getBoundingClientRect","newWidth","width","newHeight","height","style","setTransform","setMapData","setTimeout","resetView","render","nodes","xs","x","ys","y","minX","Math","min","maxX","max","minY","maxY","mapWidth","mapHeight","containerWidth","containerHeight","scaleX","scaleY","clearCanvas","applyTransform","drawEdges","drawNodes","drawLabels","save","clearRect","restore","centerX","centerY","finalScale","edges","forEach","edge","fromNode","find","from","toNode","to","fromEdge","getNodeEdgePoint","toEdge","drawEdge","baseLineWidth","lineWidth","isConnectedToUnreachable","isEdgeConnectedToUnreachableNode","dashScale","strokeStyle","setLineDash","glowSize","shadowColor","shadowBlur","beginPath","moveTo","lineTo","stroke","currentLocation","isNodeReachable","node","targetNode","dx","dy","distance","sqrt","unitX","unitY","shape","w","h","validTs","t","minT","radius","isCurrent","isExit","isReachable","strokeColor","fillColor","glowColor","fillStyle","arc","PI","fill","drawExitIcon","free_movement","some","fontSize","iconY","font","textWidth","measureText","textHeight","padding","bgX","bgY","bgWidth","bgHeight","cornerRadius","roundRect","textAlign","textBaseline","fillText","label","labelY","drawEdgeTypeInfo","edgeTypes","Set","typeInfos","has","color","text","pattern","lineHeight","lineLength","backgroundWidth","startY","fillRect","info","getViewState","setViewState","newState","assign","resetToFit","getMapBounds","cleanup","MapInteraction","renderer","interactionState","config","minScale","maxScale","zoomSensitivity","touchZoomSensitivity","panSensitivity","isDragging","lastPointerX","lastPointerY","lastScale","setupInteractions","addEventListener","handleWheel","handlePointerStart","handlePointerMove","handlePointerEnd","handleTouchStart","passive","handleTouchMove","handleTouchEnd","e","preventDefault","event","mouseX","clientX","left","mouseY","clientY","top","zoomAt","deltaY","button","startDrag","cursor","updateDrag","endDrag","touches","touch","touch1","touch2","getTouchDistance","startPinchDistance","scaleChange","newScale","deltaX","newOffsetX","newOffsetY","canvasX","canvasY","deltaScale","isRelative","oldScale","worldX","worldY","zoomIn","zoomOut","setScale","clampedScale","mapBounds","getInteractionState","removeEventListener","MapParser","static","extractMapFromText","match","MAP_REGEX","exec","LOOSE_MAP_REGEX","parseMapData","lines","split","metadata","nodeIds","line","trimmedLine","trim","startsWith","nodeMatch","parseNode","characters","includes","edgeMatch","parseEdge","metadataMatch","parseMetadata","validNodeIds","labelRaw","charactersStr","xStr","yStr","shapeCode","dimensions","parseInt","isNaN","s","sizeMatch","typeCode","trimmedKey","moveVal","toUpperCase","_hoisted_1","class","__name","emits","setup","__props","_ctx","_cache","onClick","$event","$emit","onTouchstart","title","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","mapText","mapCanvas","ref","interaction","resizeObserver","currentZoom","showZoomIndicator","zoomIndicatorTimer","computed","description","movementIcon","icons","F","A","N","error","console","handleZoomIn","updateZoomIndicator","showZoomIndicatorTemporarily","handleZoomOut","handleResetView","setupDragStateListener","dragTimeout","clearTimeout","setupCanvasResize","ResizeObserver","observe","watch","immediate","onMounted","delay","initializeRenderer","onUnmounted","disconnect","grabbing","ref_key","MapControls","onZoomIn","onZoomOut","onResetView","round","MapGraphManager","activeApps","Map","setupEventListeners","getInstance","instance","renderMessage","async","messageId","messages","getChatMessages","message","$mesText","findMessageElement","cleanupMessage","createMapContainer","selectors","selector","$element","$","parent","$container","warn","mountId","$mountPoint","append","app","createApp","MapContainer","mount","teleportStyle","set","mountPoint","getScriptId","attr","clone","appendTo","log","deteleportStyle","appData","unmount","delete","handleMessageEvent","_","debounce","eventOn","tavern_events","MESSAGE_RECEIVED","MESSAGE_UPDATED","MESSAGE_SWIPED","CHARACTER_MESSAGE_RENDERED","_appData","clear","getStats","size","Array","values","nodeCount","edgeCount","movement","mapManager","APP_READY","getLastMessageId","on"],"sourceRoot":""}